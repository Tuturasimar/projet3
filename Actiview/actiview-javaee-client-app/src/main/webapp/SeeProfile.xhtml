<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">


<ui:composition template="/WEB-INF/templates/default.xhtml">


	<ui:define name="content">
		<h2 class="text-center mt-3">Page de profil</h2>
		<div class="row d-flex justify-content-between align-items-center">
			<div class="col-8">
				<h3 class="m-3">Informations personnelles</h3>
				<p:dataTable value="#{seeProfileBean.user}" var="user">
					<p:column>
						<f:facet name="header">Prénom et Nom</f:facet> #{user.userData.firstname} #{user.userData.lastname}
					</p:column>

					<p:column>
						<f:facet name="header">Date de naissance</f:facet>
						<h:outputText value="#{user.userData.birthday}">
							<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
				</p:dataTable>
				<p:commandButton class="my-3" value="Changer mon mot de passe" action="#{updatePasswordBean.showUpdatePassword(seeProfileBean.user.id)}"/>
			</div>
			<c:if
				test="#{seeProfileBean.checkUserSalarie(seeProfileBean.user.id)}">

				<div class="card col-4">
					<h5 class="text-center">Diagramme d'activité</h5>
					<p:donutChart model="#{seeProfileBean.model}" style="width: 100%" />
				</div>


			</c:if>
		</div>
		<h3 class="m-3">Informations du compte</h3>
		<p:dataTable value="#{seeProfileBean.user}" var="user">
			<p:column>
				<f:facet name="header">Login</f:facet> #{user.login}
			</p:column>

			<p:column>
				<f:facet name="header">Date de création du compte</f:facet>
				<h:outputText value="#{user.createdAt}">
					<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
				</h:outputText>
			</p:column>

			<p:column>
				<f:facet name="header">Statut du compte</f:facet> #{user.status.label}
			</p:column>

			<p:column>
				<f:facet name="header">Rôle de l'utilisateur</f:facet> #{seeProfileBean.getListUserRoleByUserId(user.id)}
			</p:column>
		</p:dataTable>

		<h3 class="m-3">Informations professionnelles</h3>
		<p:dataTable value="#{seeProfileBean.user}" var="user">
			<p:column>
				<f:facet name="header">Poste</f:facet> #{user.userData.jobEnum.label} 
			</p:column>

			<p:column>
				<f:facet name="header">Email</f:facet> #{user.userData.email}
			</p:column>
		</p:dataTable>
	</ui:define>
</ui:composition>

</html>